"use strict";var qqInput=document.querySelector("#qq_input"),confirmButton=document.querySelector("#confirm_button"),downloadArea=document.querySelector("#download_area"),downloadButton=document.querySelector("#download_button"),result=document.querySelector("#result");function gray(t){var a=document.createElement("canvas"),e=a.getContext("2d"),o=t.width,n=t.height;a.width=o,a.height=n,e.drawImage(t,0,0);for(var r=e.getImageData(0,0,o,n),d=0;d<r.height;d++)for(var u=0;u<r.width;u++){var i=4*d*r.width+4*u,l=(r.data[i]+r.data[1+i]+r.data[2+i])/3;r.data[i]=l,r.data[1+i]=l,r.data[2+i]=l}return e.putImageData(r,0,0,0,0,r.width,r.height),a.toDataURL("image/jpeg")}confirmButton.onclick=function(){var t="https://api.xuewen.ink/gray-avatar/avatar/"+qqInput.value,a=new Image;a.crossOrigin="",a.src=t,a.onload=function(){result.src=gray(a),downloadArea.style.display="inline-block",result.style.display="inline-block",downloadButton.download="avatar-"+(new Date).getTime()+".jpg",downloadButton.href=result.src,downloadButton.innerText="下载"}};